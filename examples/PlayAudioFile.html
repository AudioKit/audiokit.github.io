---
title: Audio Kit Examples - Play Audio File
header: Play Audio File
permalink: /examples/PlayAudioFile/
layout: examples
---

<p>
Here we demonstrate audio playback and processing capabilities. Each time the button is pressed, the audio file plays, but with reverb and randomized playback speed.
</p>

<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/172496505&amp;color=ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false"></iframe>


<p>
A path to the audio file that will be played ("blaster.aiff") is defined in the code below from "AudioFilePlayer.m". The audio is then stored in an instance of AKSoundFileTable for later processing and playback.
<p>

{% highlight objective-c %}
NSString *file;
file = [[NSBundle mainBundle] pathForResource:@"blaster" ofType:@"aiff"];
AKSoundFileTable *fileTable;
fileTable = [[AKSoundFileTable alloc] initWithFilename:file];
[self connect:fileTable];
{% endhighlight %}

<p>
Next, and instance of AKLoopingOscillator is created, which reads sampled sound (mono or stereo) from a table, with optional sustain and release looping. The input source for "oscil" is the audio file described above. The frequency of the oscillator is determined by the variable "speed", which will be described further shortly.
</p>

{% highlight objective-c %}
AKLoopingOscillator *oscil;
oscil = [[AKLoopingOscillator alloc] initWithSoundFileTable:fileTable
                                        frequencyMultiplier:note.speed
                                                  amplitude:akp(0.5)
                                                       type:kLoopingOscillatorNoLoop];
[self connect:oscil];
{% endhighlight %}


<p>The last bit of processing done is the instance of AKReverb, as shown in the code below:</p>

{% highlight objective-c %}
AKReverb *reverb;
reverb = [[AKReverb alloc] initWithAudioSource:oscil
                                 feedbackLevel:akp(0.85)
                               cutoffFrequency:akp(12000)];
[self connect:reverb];
{% endhighlight %}

<p>
Speed is defined at the bottom of "AudioFilePlayer.m". "_speed" is of type "AKNoteProperty", which are properties of an instrument that are defined per each note generated by an instrument. In this case, speed is initalzied at a value of 1.0, and will randomnly cycle through values between 0.2 and 2.0.
<p>

{% highlight objective-c %}
- (instancetype)init;
{
    self = [super init];
    if(self) {
        _speed = [[AKNoteProperty alloc] initWithValue:1.0
                                               minimum:0.2
                                               maximum:2.0];
        [self addProperty:_speed];
    }
    return self;
}
{% endhighlight %}



<p>
The conductor file plays the audio file at random playback speeds. The code below (from 'AudioFileConductor.h'), changes the playback speed of the audio file whenever ther user presses a button:
</p>


{% highlight objective-c %}
- (IBAction)touchPlayButton:(id)sender {
    AudioFilePlayerNote *note = [[AudioFilePlayerNote alloc] init];
    [note.speed randomize];
    [audioFilePlayer playNote:note];
}
{% endhighlight %}
